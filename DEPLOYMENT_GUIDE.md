# Руководство по развертыванию

## Требования
- Python 3.8 или выше
- pip (менеджер пакетов Python)
- Git

## Шаги по установке

### 1. Клонирование репозитория
```bash
git clone <repository_url>
cd <repository_name>
```

### 2. Создание виртуального окружения
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

### 3. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 4. Настройка переменных окружения
1. Создайте файл `.env` в корневой директории проекта
2. Скопируйте содержимое `.env.example` в `.env`
3. Заполните все необходимые переменные:
   ```
   BOT_TOKEN=your_telegram_bot_token
   ADMIN_ID=your_telegram_user_id
   MAX_ATTEMPTS=2
   DEBUG=false
   ```

### 5. Запуск приложения

#### Локальное развертывание
```bash
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

#### Производственное развертывание
```bash
uvicorn main:app --host 0.0.0.0 --port $PORT --workers 4
```

## Настройка Telegram бота

1. Создайте нового бота через @BotFather
2. Получите токен бота и добавьте его в `.env`
3. Настройте веб-приложение:
   ```
   /setdomain - установите домен вашего приложения
   /setwebhook - установите URL для вебхуков
   ```

## Проверка развертывания

1. Проверьте работоспособность API:
   ```bash
   curl http://localhost:8000/health
   ```

2. Проверьте доступность веб-интерфейса:
   - Откройте `http://localhost:8000` в браузере
   - Проверьте работу рулетки
   - Проверьте админ-панель

## Мониторинг и логирование

- Логи приложения находятся в стандартном выводе
- Для production рекомендуется настроить внешнюю систему логирования

## Обновление приложения

1. Остановите текущий процесс
2. Получите последние изменения:
   ```bash
   git pull origin main
   ```
3. Обновите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
4. Перезапустите приложение

## Устранение неполадок

См. `TROUBLESHOOTING.md` для решения распространенных проблем.

## Безопасность

1. Всегда используйте HTTPS в production
2. Регулярно обновляйте зависимости
3. Не храните чувствительные данные в коде
4. Используйте безопасные пароли и токены

## Контакты

При возникновении проблем обращайтесь к администратору проекта. 